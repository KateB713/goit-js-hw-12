{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"52975697-1a0d4c1008252be130962ab4a\";\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page = 1) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page,\n                per_page: PER_PAGE,\n            }\n        });\n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching data:\", error);\n        throw error;\n    }\n    }","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst extraBtn = document.querySelector('.load-more-btn');\n\nexport const lightbox = new SimpleLightbox(\".gallery a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nexport function createGallery(arr) {\n    const createMarkup = arr\n        .map(\n            image => `\n            <li class=\"gallery-item\">\n                <a a class= \"gallery-link\" href = \"${image.largeImageURL}\" >\n                     <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"360\" />\n                </a>\n                <div class=\"img-info\">\n                    <div class=\"img-info-box\">\n                        <h2 class=\"img-info-title\">Likes</h2>\n                        <p class=\"img-info-value\">${image.likes}</p>\n                    </div>\n                    <div class=\"img-info-box\">\n                        <h2 class=\"img-info-title\">Views</h2>\n                        <p class=\"img-info-value\">${image.views}</p>\n                    </div>\n                    <div class=\"img-info-box\">\n                        <h2 class=\"img-info-title\">Comments</h2>\n                        <p class=\"img-info-value\">${image.comments}</p>\n                    </div>\n                    <div class=\"img-info-box\">\n                        <h2 class=\"img-info-title\">Downloads</h2>\n                        <p class=\"img-info-value\">${image.downloads}</p>\n                    </div>\n                </div>\n            </li>`\n    ).join(\"\");\n    \n    galleryContainer.insertAdjacentHTML(\"beforeend\", createMarkup);\n    lightbox.refresh();\n};\n\nexport function clearGallery() {\n    galleryContainer.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\");\n}\n\nexport function showLoadMoreButton() {\n    extraBtn.classList.remove(\"hidden\");\n}\n\nexport function hideLoadMoreButton() {\n    extraBtn.classList.add(\"hidden\");\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n} from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\".form\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\n\nlet searchQuery = \"\";\nlet page = 1;\n\nhideLoadMoreButton();\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n\n    const newQuery = event.currentTarget.elements[\"search-text\"].value.trim();\n\n    if (!newQuery) {\n        iziToast.warning({\n            title: \"Ooops!\",\n            message: \"Please enter a search query before searching!\",\n            position: \"topRight\",\n        });\n        return;\n    }\n\n    if (newQuery !== searchQuery) {\n        searchQuery = newQuery;\n        page = 1;\n        clearGallery();\n    }\n    \n    showLoader();\n    hideLoadMoreButton();\n\n\n\n    try {\n        const data = await getImagesByQuery(searchQuery, page);\n\n        if (data.hits.length === 0) {\n            iziToast.info({\n                title: \"Ooops!\",\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\",\n            });\n            hideLoader();\n            return;\n        }\n\n        createGallery(data.hits);\n        form.reset();\n\n        if (page < Math.ceil(data.totalHits / 15)) {\n            showLoadMoreButton();\n        } else {\n            hideLoadMoreButton();\n            iziToast.info({\n                title: \"Ooops!\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n        }\n\n    } catch (error) {\n        iziToast.error({\n            title: \"Error!\",\n            message: \"Something went wrong. Please try again!\",\n            position: \"topRight\",\n        });\n    } finally {\n        hideLoader();\n    }\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n    page += 1;\n    showLoader();\n    hideLoadMoreButton();\n\n    try {\n        const data = await getImagesByQuery(searchQuery, page);\n        createGallery(data.hits);\n\n        const galleryItem = document.querySelector('.gallery-item');\n        if (galleryItem) {\n            const { height: cardHeight } = galleryItem.getBoundingClientRect();\n\n            window.scrollBy({\n                top: cardHeight * 4,\n                behavior: 'smooth',\n            })\n        }\n\n        if (page < Math.ceil(data.totalHits / 15)) {\n            showLoadMoreButton();\n        } else {\n            hideLoadMoreButton();\n            iziToast.info({\n                title: \"Ooops!\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n        }\n    } catch (error) {\n        iziToast.error({\n            title: \"Error!\",\n            message: \"Something went wrong. Please try again!\",\n            position: \"topRight\",\n        });\n    } finally {\n        hideLoader();\n    }\n});"],"names":["API_KEY","BASE_URL","PER_PAGE","getImagesByQuery","query","page","axios","error","galleryContainer","loader","extraBtn","lightbox","SimpleLightbox","createGallery","arr","createMarkup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","loadMoreBtn","searchQuery","event","newQuery","iziToast","data","galleryItem","cardHeight"],"mappings":"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"}